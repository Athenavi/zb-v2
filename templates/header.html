{% macro zytopbar() -%}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="/static/css/tailwind.min.css" rel="stylesheet">
    <link href="/static/css/header.css" rel="stylesheet">

    <div class="loader" id="loader"></div>
    <header class="bg-blue-500 shadow-lg">
        <div class="container mx-auto flex justify-between items-center py-6">
            <h1 class="text-2xl font-bold text-gray-800" onclick="window.location.href = '/'"><img
                    src="/static/favicon.ico" style="height: 32px" alt=""></h1>
            <nav>
                <ul class="flex space-x-6">
                    <li>
                        <div class="dropdown">
                            <button class="text-white hover:bg-blue-600 px-4 py-2">ğŸ”»æˆ‘çš„</button>
                            <div class="dropdown-content">
                                <a href="/profile">ä¸ªäººä¸­å¿ƒ</a>
                                <a href="/setting/profiles">è®¾ç½®</a>
                                <a href="/media">åª’ä½“</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="dropdown">
                            <button class="text-white hover:bg-blue-600 px-4 py-2">ğŸ”»æ›´å¤š</button>
                            <div class="dropdown-content">
                                <a href="/register">æ³¨å†Œ</a>
                                <a href="/links">å‹é“¾</a>
                                <a href="/changelog">æ›´æ–°æ—¥å¿—</a>
                                <a href="/guestbook">ç•™è¨€</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <button id="theme-toggle"
                                class="text-white px-4 py-2 rounded hover:bg-blue-600 focus:outline-none">
                            ğŸŒ™
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.getElementById("loader").style.display = "none";
        });
        window.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        }, false);
    </script>

    <div class="fixed bottom-4 right-4">

    </div>

    <ul class="menu">
        <li id="home">ä¸»é¡µ</li>
        <li id="refresh">åˆ·æ–°</li>
        <li id="search">æœç´¢</li>
        <li id="travel">éšæœºæ–‡ç« </li>
        <li id="guestbook">ç•™è¨€æ¿</li>
    </ul>

    <script>
        // è·å–èœå•é¡¹
        const home = document.getElementById('home');
        const search = document.getElementById('search');
        const refresh = document.getElementById('refresh');
        const travel = document.getElementById('travel');
        const guestbook = document.getElementById('guestbook');

        guestbook.addEventListener('click', function () {
            window.location.href = '/guestbook';
        });

        travel.addEventListener('click', function () {
            window.location.href = '/travel';
        });

        home.addEventListener('click', function () {
            console.log('æ‰§è¡Œä¸»é¡µåŠŸèƒ½');
            window.location.href = '/';
        });

        search.addEventListener('click', function () {
            console.log('æ‰§è¡Œæœç´¢åŠŸèƒ½');
            window.location.href = '/search';
        });

        refresh.addEventListener('click', function () {
            console.log('æ‰§è¡Œåˆ·æ–°åŠŸèƒ½');
            // åœ¨è¿™é‡Œæ·»åŠ åˆ·æ–°é¡µé¢çš„ç›¸å…³åŠŸèƒ½
            location.reload(); // åˆ·æ–°é¡µé¢
        });

        document.addEventListener("DOMContentLoaded", function () {
            const button = document.getElementById('theme-toggle');

            const currentTheme = localStorage.getItem('theme');
            let isDark = currentTheme === 'dark';

            document.body.setAttribute('data-theme', isDark ? 'dark' : 'light');
            button.textContent = isDark ? 'â˜€' : 'ğŸŒ™';

            button.addEventListener('click', () => {
                isDark = !isDark;

                document.body.setAttribute('data-theme', isDark ? 'dark' : 'light');
                button.textContent = isDark ? 'â˜€' : 'ğŸŒ™';

                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            });
        });

        // èœå•
        const menu = document.querySelector('.menu');

        // ç»‘å®šå³é”®äº‹ä»¶
        document.addEventListener('contextmenu', function (e) {
            // å–æ¶ˆé»˜è®¤çš„æµè§ˆå™¨è‡ªå¸¦å³é”®
            e.preventDefault();
            // çª—å£å®½é«˜
            let winWidth = window.innerWidth;
            let winHeight = window.innerHeight;
            // é¼ æ ‡ç‚¹å‡»çš„ä½ç½®
            let posX = e.pageX;
            let posY = e.pageY;
            // èœå•å®½é«˜
            let menuWidth = menu.getBoundingClientRect().width;
            let menuHeight = menu.getBoundingClientRect().height;
            // èœå•è¦æ˜¾ç¤ºçš„ä½ç½®
            let posLeft = 0, posTop = 0;
            // èœå•æ˜¾ç¤ºæ—¶å¯èƒ½é‡åˆ°çš„å‡ ç§æƒ…å†µï¼š
            // å³è¾¹å’Œåº•éƒ¨åŒæ—¶è¶…å‡º
            if (posX + menuWidth >= winWidth && posY + menuHeight >= winHeight) {
                posLeft = posX - menuWidth;
                posTop = posY - menuHeight;
            }
            // å³ä¾§è¶…å‡º
            else if (posX + menuWidth >= winWidth) {
                posLeft = posX - menuWidth;
                posTop = posY;
            }
            // åº•éƒ¨è¶…å‡º
            else if (posY + menuHeight >= winHeight) {
                posLeft = posX;
                posTop = posY - menuHeight;
            }
            // é»˜è®¤æƒ…å†µï¼Œéƒ½ä¸è¶…å‡º
            else {
                posLeft = posX;
                posTop = posY;
            }
            // è®¾ç½®èœå•çš„ä½ç½®å¹¶æ˜¾ç¤º
            menu.style.left = posLeft + 'px';
            menu.style.top = posTop + 'px';
            menu.style.opacity = 1;
            menu.style.zIndex = 99;
        })

        // æœ€åï¼ŒåŠ ä¸ªå•å‡»å…¶ä»–åœ°æ–¹å…³é—­èœå•
        document.addEventListener('click', function () {
            menu.style.opacity = 0;
            menu.style.zIndex = -1;
        })
    </script>
{% endmacro %}
{% macro SimpleHeader(SiteName) -%}
    <style>
        body {
            font-family: 'Arial', sans-serif;
            padding-top: 64px; /* ç¡®ä¿å†…å®¹ä¸è¢«å›ºå®šçš„å¯¼èˆªæ é®æŒ¡ */
        }
    </style>
    <div class="fixed top-0 w-full bg-gray-100 shadow-md z-50">
        <div class="container mx-auto flex justify-between items-center p-4">
            <div class="text-red-600 font-bold text-xl" onclick="window.location.href = '/'">{{ SiteName }}</div>
            <div class="space-x-4">
                <a href="/featured" class="text-gray-700 hover:text-red-600">æ¨è</a>
                <a href="/search" class="text-gray-700 hover:text-red-600">æœç´¢</a>
                <a href="/media" class="text-gray-700 hover:text-red-600">åª’ä½“</a>
                <a href="/profile" class="text-gray-700 hover:text-red-600">æˆ‘çš„</a>
            </div>
        </div>
    </div>
{% endmacro %}